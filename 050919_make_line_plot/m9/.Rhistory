})
# plot(particle_total_volume_ratio, volume_total_volume_ratio,
#      pch = 1,
#      cex = 0.5,
#      main = filename)
# abline(0,1)
}
}
compare_ratio(file_list = file_list, FALSE)
ggplot(data = ratio_data_frame, aes(x = ratio_data_frame$particle_total_volume_ratio,
y = volume_total_volume_ratio)) +
xlab("particle total volume ratio") +
ylab("volume total volume ratio") +
ggtitle(filename) +
geom_point() +
stat_summary(fun.data=mean_cl_normal) +
geom_smooth(method='lm',formula= y~x ) +
geom_abline(intercept = 0, slope = 1, color="black",
linetype="dashed", size = 1) +
theme_minimal()
?ggtitle
ggplot(data = ratio_data_frame, aes(x = ratio_data_frame$particle_total_volume_ratio,
y = volume_total_volume_ratio)) +
xlab("particle total volume ratio") +
ylab("volume total volume ratio") +
ggtitle(filename, subtitle = "Blue: Linear Regression Line; Black: Line Y = X") +
geom_point() +
stat_summary(fun.data=mean_cl_normal) +
geom_smooth(method='lm',formula= y~x ) +
geom_abline(intercept = 0, slope = 1, color="black",
linetype="dashed", size = 1) +
theme_minimal()
suppressWarnings({
ggplot(data = ratio_data_frame, aes(x = ratio_data_frame$particle_total_volume_ratio,
y = volume_total_volume_ratio)) +
xlab("particle total volume ratio") +
ylab("volume total volume ratio") +
ggtitle(filename, subtitle = "Blue: Linear Regression Line;  Black: Line Y = X") +
geom_point() +
stat_summary(fun.data=mean_cl_normal) +
geom_smooth(method='lm',formula= y~x ) +
geom_abline(intercept = 0, slope = 1, color="black",
linetype="dashed", size = 1) +
theme_minimal()
})
filename
?ggsave
ggsave(filename = paste0(filename, "png"))
ggplot(data = ratio_data_frame, aes(x = ratio_data_frame$particle_total_volume_ratio,
y = volume_total_volume_ratio)) +
xlab("particle total volume ratio") +
ylab("volume total volume ratio") +
ggtitle(filename, subtitle = "Blue: Linear Regression Line;  Black: Line Y = X") +
geom_point() +
stat_summary(fun.data=mean_cl_normal) +
geom_smooth(method='lm',formula= y~x ) +
geom_abline(intercept = 0, slope = 1, color="black",
linetype="dashed", size = 1) +
theme_minimal()
ggsave(filename = paste0(filename, "png"))
ggplot(data = ratio_data_frame, aes(x = ratio_data_frame$particle_total_volume_ratio,
y = volume_total_volume_ratio)) +
xlab("particle total volume ratio") +
ylab("volume total volume ratio") +
ggtitle(filename, subtitle = "Blue: Linear Regression Line;  Black: Line Y = X") +
geom_point() +
stat_summary(fun.data=mean_cl_normal) +
geom_smooth(method='lm',formula= y~x ) +
geom_abline(intercept = 0, slope = 1, color="black",
linetype="dashed", size = 1) +
theme_minimal()
ggsave(filename = paste0(filename, "png"), device = "png")
ggplot(data = ratio_data_frame, aes(x = ratio_data_frame$particle_total_volume_ratio,
y = volume_total_volume_ratio)) +
xlab("particle total volume ratio") +
ylab("volume total volume ratio") +
ggtitle(filename, subtitle = "Blue: Linear Regression Line;  Black: Line Y = X") +
geom_point() +
stat_summary(fun.data=mean_cl_normal) +
geom_smooth(method='lm',formula= y~x ) +
geom_abline(intercept = 0, slope = 1, color="black",
linetype="dashed", size = 1) +
theme_minimal()
ggsave(filename = paste0(filename, ".png"), device = "png")
ggplot(data = ratio_data_frame, aes(x = ratio_data_frame$particle_total_volume_ratio,
y = volume_total_volume_ratio)) +
xlab("particle total volume ratio") +
ylab("volume total volume ratio") +
ggtitle(filename, subtitle = "Blue: Linear Regression Line;  Black: Line Y = X") +
geom_point() +
stat_summary(fun.data=mean_cl_normal) +
geom_smooth(method='lm',formula= y~x ) +
geom_abline(intercept = 0, slope = 1, color="black",
linetype="dashed", size = 1) +
theme_minimal()
ggsave(filename = paste0(filename, ".png"), device = "png")
Sys.sleep(1)
compare_ratio = function(file_list, window_graphic = TRUE){
for(filename in file_list){
filename = unlist(strsplit(filename, "[.]"))[1]
data = read.csv(paste0(filename, ".csv"))
total_volume = sum(data$volume)
particle_count = data$volume * data$mean
total_particle_count = sum(particle_count)
particle_total_volume_ratio = particle_count/total_particle_count
volume_total_volume_ratio = data$volume/total_volume
if(window_graphic){
windows(width = 1920, height = 1080)
}
#Convert to data frame
ratio_data_frame = data.frame(particle_total_volume_ratio,
volume_total_volume_ratio)
#Plot using ggplot
ggplot(data = ratio_data_frame, aes(x = ratio_data_frame$particle_total_volume_ratio,
y = volume_total_volume_ratio)) +
xlab("particle total volume ratio") +
ylab("volume total volume ratio") +
ggtitle(filename, subtitle = "Blue: Linear Regression Line;  Black: Line Y = X") +
geom_point() +
stat_summary(fun.data=mean_cl_normal) +
geom_smooth(method='lm',formula= y~x ) +
geom_abline(intercept = 0, slope = 1, color="black",
linetype="dashed", size = 1) +
theme_minimal()
ggsave(filename = paste0(filename, ".png"), device = "png")
Sys.sleep(1)
}
}
compare_ratio = function(file_list){
for(filename in file_list){
filename = unlist(strsplit(filename, "[.]"))[1]
data = read.csv(paste0(filename, ".csv"))
total_volume = sum(data$volume)
particle_count = data$volume * data$mean
total_particle_count = sum(particle_count)
particle_total_volume_ratio = particle_count/total_particle_count
volume_total_volume_ratio = data$volume/total_volume
# if(window_graphic){
#   windows(width = 1920, height = 1080)
# }
#Convert to data frame
ratio_data_frame = data.frame(particle_total_volume_ratio,
volume_total_volume_ratio)
#Plot using ggplot
ggplot(data = ratio_data_frame, aes(x = ratio_data_frame$particle_total_volume_ratio,
y = volume_total_volume_ratio)) +
xlab("particle total volume ratio") +
ylab("volume total volume ratio") +
ggtitle(filename, subtitle = "Blue: Linear Regression Line;  Black: Line Y = X") +
geom_point() +
stat_summary(fun.data=mean_cl_normal) +
geom_smooth(method='lm',formula= y~x ) +
geom_abline(intercept = 0, slope = 1, color="black",
linetype="dashed", size = 1) +
theme_minimal()
ggsave(filename = paste0(filename, ".png"), device = "png")
Sys.sleep(1)
}
}
compare_ratio(file_list = file_list)
ratio_mat
filename
file_list
filename = file_list[1]
filename
data = read.csv(filename)
total_volume = sum(data$volume)
particle_count = data$volume * data$mean
total_particle_count = sum(particle_count)
particle_total_volume_ratio = particle_count/total_particle_count
volume_total_volume_ratio = data$volume/total_volume
ratio_mat = as.matrix(cbind(particle_total_volume_ratio, volume_total_volume_ratio))
ratio_mat = t(ratio_mat[nrow(ratio_mat):1,])
colnames(ratio_mat)= data$label
ratio_mat
as.data.frame(ratio_mat)
rr = as.data.frame(ratio_mat)
ratio_data_frame
ratio_data_frame = as.data.frame(ratio_mat)
a = c(1,2,3)
rbind(a)
rbind(a,a)
ratio_mat = as.matrix(cbind(particle_total_volume_ratio, volume_total_volume_ratio))
ratio_mat = t(ratio_mat[nrow(ratio_mat):1,])
ratio_mat = rbind(1:dim(ratio_mat)[2], ratio_mat)
colnames(ratio_mat)= c("Index", data$label)
dim(ratio_mat)[2]
1:dim(ratio_mat)[2]
ratio_mat = rbind(1:dim(ratio_mat)[2], ratio_mat)
ratio_mat
data$label
data = read.csv(filename)
total_volume = sum(data$volume)
particle_count = data$volume * data$mean
total_particle_count = sum(particle_count)
particle_total_volume_ratio = particle_count/total_particle_count
volume_total_volume_ratio = data$volume/total_volume
ratio_mat = as.matrix(cbind(particle_total_volume_ratio, volume_total_volume_ratio))
ratio_mat = t(ratio_mat[nrow(ratio_mat):1,])
index = 1:dim(ratio_mat)[2]
ratio_mat = rbind(index, ratio_mat)
colnames(ratio_mat)= c(data$label)
ratio_mat
ratio_data_frame = as.data.frame(ratio_mat)
ratio_data_frame
df <- data.frame(dose=c("D0.5", "D1", "D2"),
len=c(4.2, 10, 29.5))
# Change the colors manually
p <- ggplot(data=df2, aes(x=dose, y=len, fill=supp)) +
geom_bar(stat="identity", color="black", position=position_dodge())+
theme_minimal()
# Use custom colors
p + scale_fill_manual(values=c('#999999','#E69F00'))
# Use brewer color palettes
p + scale_fill_brewer(palette="Blues")
ratio_data_frame
ratio_data_frame = t(as.data.frame(ratio_mat))
ratio_data_frame
ratio_data_frame$index
ratio_data_frame$`index``
ratio_data_frame$`index`
ratio_data_frame
names(ratio_data_frame)
dim
dim(ratio_data_frame)
dim(ratio_data_frame)[1,1]
ratio_data_frame[1,1]
rep(ratio_data_frame[,1], 2)
data = read.csv(filename)
total_volume = sum(data$volume)
particle_count = data$volume * data$mean
total_particle_count = sum(particle_count)
particle_total_volume_ratio = particle_count/total_particle_count
volume_total_volume_ratio = data$volume/total_volume
ratio_mat = as.matrix(cbind(particle_total_volume_ratio, volume_total_volume_ratio))
ratio_mat = t(ratio_mat[nrow(ratio_mat):1,])
index = 1:dim(ratio_mat)[2]
ratio_mat = rbind(index, ratio_mat)
colnames(ratio_mat)= c(data$label)
ratio_data_frame
ratio_data_frame$ratio
names(ratio_data_frame)
colnames(ratio_data_frame)
class
class(ratio_data_frame)
data = read.csv(filename)
total_volume = sum(data$volume)
particle_count = data$volume * data$mean
total_particle_count = sum(particle_count)
particle_total_volume_ratio = particle_count/total_particle_count
volume_total_volume_ratio = data$volume/total_volume
ratio_mat = as.matrix(cbind(particle_total_volume_ratio, volume_total_volume_ratio))
ratio_mat = t(ratio_mat[nrow(ratio_mat):1,])
index = 1:dim(ratio_mat)[2]
ratio_mat = rbind(index, ratio_mat)
colnames(ratio_mat)= c(data$label)
ratio_data_frame = as.data.frame(ratio_data_frame)
ratio_data_frame = as.data.frame(ratio_data_frame)
ratio_data_frame
ratio_data_frame = t(as.data.frame(ratio_data_frame))
ratio_data_frame
data$label
data = read.csv(filename)
total_volume = sum(data$volume)
particle_count = data$volume * data$mean
total_particle_count = sum(particle_count)
particle_total_volume_ratio = particle_count/total_particle_count
volume_total_volume_ratio = data$volume/total_volume
ratio_mat = as.matrix(cbind(particle_total_volume_ratio, volume_total_volume_ratio))
ratio_mat = t(ratio_mat[nrow(ratio_mat):1,])
index = 1:dim(ratio_mat)[2]
ratio_mat = rbind(index, ratio_mat)
#colnames(ratio_mat)= c(data$label)
ratio_data_frame = t(as.data.frame(ratio_data_frame))
colnames(ratio_data_frame) = c(data$label)
colnames(ratio_data_frame)
ratio_data_frame = t(as.data.frame(ratio_data_frame))
ratio_data_frame
colnames(ratio_data_frame)
data$label
colnames(ratio_data_frame) = c(data$label)
ratio_data_frame$1
colnames(ratio_data_frame) = c(paste0("l",data$label))
ratio_data_frame
ratio_data_frame$l1
data = read.csv(filename)
total_volume = sum(data$volume)
particle_count = data$volume * data$mean
total_particle_count = sum(particle_count)
particle_total_volume_ratio = particle_count/total_particle_count
volume_total_volume_ratio = data$volume/total_volume
ratio_mat = as.matrix(cbind(particle_total_volume_ratio, volume_total_volume_ratio))
ratio_mat = t(ratio_mat[nrow(ratio_mat):1,])
index = 1:dim(ratio_mat)[2]
ratio_mat = rbind(index, ratio_mat)
#colnames(ratio_mat)= c(data$label)
colnames(ratio_data_frame) = c(paste0("l",data$label))
ratio_data_frame = as.data.frame(ratio_data_frame)
ratio_data_frame
ratio_data_frame = t(as.data.frame(ratio_data_frame))
ratio_data_frame
data = read.csv(filename)
total_volume = sum(data$volume)
particle_count = data$volume * data$mean
total_particle_count = sum(particle_count)
particle_total_volume_ratio = particle_count/total_particle_count
volume_total_volume_ratio = data$volume/total_volume
ratio_mat = as.matrix(cbind(particle_total_volume_ratio, volume_total_volume_ratio))
ratio_mat = t(ratio_mat[nrow(ratio_mat):1,])
index = 1:dim(ratio_mat)[2]
ratio_mat = rbind(index, ratio_mat)
#colnames(ratio_mat)= c(data$label)
colnames(ratio_data_frame) = c(paste0("l",data$label))
ratio_data_frame = as.data.frame(t(ratio_data_frame))
colnames(ratio_data_frame) = c(paste0("l",data$label))
ratio_data_frame
data = read.csv(filename)
total_volume = sum(data$volume)
particle_count = data$volume * data$mean
total_particle_count = sum(particle_count)
particle_total_volume_ratio = particle_count/total_particle_count
volume_total_volume_ratio = data$volume/total_volume
ratio_mat = as.matrix(cbind(particle_total_volume_ratio, volume_total_volume_ratio))
ratio_mat = t(ratio_mat[nrow(ratio_mat):1,])
index = 1:dim(ratio_mat)[2]
ratio_mat = rbind(index, ratio_mat)
#colnames(ratio_mat)= c(data$label)
colnames(ratio_data_frame) = c(paste0("l",data$label))
ratio_data_frame = as.data.frame(t(ratio_data_frame))
ratio_data_frame
c(rep("particle_total_volume_ratio", dim(ratio_data_frame)[1]),
rep("volume_total_volume_ratio", dim(ratio_data_frame)[1]))
rr = data.frame(index = rep(ratio_data_frame$index, 2),
ratio = c(ratio_data_frame$particle_total_volume_ratio,
ratio_data_frame$volume_total_volume_ratio),
PorV = c(rep("particle_total_volume_ratio", dim(ratio_data_frame)[1]),
rep("volume_total_volume_ratio", dim(ratio_data_frame)[1]))
)
rr
ggplot(data = ratio_data_frame, aes(x = rr$index,
y = rr$ratio,
fill = rr$PorV)) +
geom_bar(stat="identity")
ggplot(data = ratio_data_frame, aes(x = rr$index,
y = rr$ratio,
fill = rr$PorV))
rr$index
rr$ratio
ggplot(data = rr, aes(x = rr$index,
y = rr$ratio,
fill = rr$PorV)) +
geom_bar(stat="identity")
ggplot(data = rr, aes(x = rr$index,
y = rr$ratio,
fill = rr$PorV)) +
geom_bar(stat="identity")geom_bar(stat="identity", color="black", position=position_dodge())+
theme_minimal()
ggplot(data = rr, aes(x = rr$index,
y = rr$ratio,
fill = rr$PorV)) +
geom_bar(stat="identity", color="black", position=position_dodge())+
theme_minimal()
ggplot(data = rr, aes(x = rr$index,
y = rr$ratio,
fill = rr$PorV)) +
geom_bar(stat="identity", color="black", position = position_dodge()) +
scale_fill_manual(values=c('#999999','#E69F00')) +
theme_minimal()
ggplot(data = rr, aes(x = rr$index,
y = rr$ratio,
fill = rr$PorV)) +
xlab("Lung Partitions") +
ylab("Ratio")
geom_bar(stat="identity", color="black", position = position_dodge()) +
scale_fill_manual(values=c('#999999','#E69F00')) +
theme_minimal()
ggplot(data = rr, aes(x = rr$index,
y = rr$ratio,
fill = rr$PorV)) +
xlab("Lung Partitions") +
ylab("Ratio") +
geom_bar(stat="identity", color="black", position = position_dodge()) +
scale_fill_manual(values=c('#999999','#E69F00')) +
theme_minimal()
ggplot(data = rr, aes(x = rr$index,
y = rr$ratio,
fill = rr$PorV)) +
xlab("Lung Partitions") +
ylab("Ratio") +
ggtitle(unlist(strsplit(filename, "[.]"))[1]) +
geom_bar(stat="identity", color="black", position = position_dodge()) +
scale_fill_manual(values=c('#999999','#E69F00')) +
theme_minimal()
data = read.csv(filename)
total_volume = sum(data$volume)
particle_count = data$volume * data$mean
total_particle_count = sum(particle_count)
particle_total_volume_ratio = particle_count/total_particle_count
volume_total_volume_ratio = data$volume/total_volume
ratio_mat = as.matrix(cbind(particle_total_volume_ratio, volume_total_volume_ratio))
ratio_mat = t(ratio_mat[nrow(ratio_mat):1,])
index = 1:dim(ratio_mat)[2]
ratio_mat = rbind(index, ratio_mat)
#colnames(ratio_mat)= c(data$label)
colnames(ratio_data_frame) = c(paste0("l",data$label))
ratio_data_frame = as.data.frame(t(ratio_data_frame))
rr = data.frame(index = rep(ratio_data_frame$index, 2),
ratio = c(ratio_data_frame$particle_total_volume_ratio,
ratio_data_frame$volume_total_volume_ratio),
legend = c(rep("particle_total_volume_ratio", dim(ratio_data_frame)[1]),
rep("volume_total_volume_ratio", dim(ratio_data_frame)[1]))
)
ggplot(data = rr, aes(x = rr$index,
y = rr$ratio,
fill = rr$legend)) +
xlab("Lung Partitions") +
ylab("Ratio") +
ggtitle(unlist(strsplit(filename, "[.]"))[1]) +
geom_bar(stat="identity", color="black", position = position_dodge()) +
scale_fill_manual(values=c('#999999','#E69F00')) +
theme_minimal()
rr
rr = data.frame(index = rep(ratio_data_frame$index, 2),
ratio = c(ratio_data_frame$particle_total_volume_ratio,
ratio_data_frame$volume_total_volume_ratio),
legend = c(rep("particle_total_volume_ratio", dim(ratio_data_frame)[1]),
rep("volume_total_volume_ratio", dim(ratio_data_frame)[1]))
)
data = read.csv(filename)
total_volume = sum(data$volume)
particle_count = data$volume * data$mean
total_particle_count = sum(particle_count)
particle_total_volume_ratio = particle_count/total_particle_count
volume_total_volume_ratio = data$volume/total_volume
ratio_mat = as.matrix(cbind(particle_total_volume_ratio, volume_total_volume_ratio))
ratio_mat = t(ratio_mat[nrow(ratio_mat):1,])
index = 1:dim(ratio_mat)[2]
ratio_mat = rbind(index, ratio_mat)
#colnames(ratio_mat)= c(data$label)
colnames(ratio_data_frame) = c(paste0("l",data$label))
ratio_data_frame = as.data.frame(t(ratio_data_frame))
rr = data.frame(index = rep(ratio_data_frame$index, 2),
ratio = c(ratio_data_frame$particle_total_volume_ratio,
ratio_data_frame$volume_total_volume_ratio),
Legend = c(rep("particle_total_volume_ratio", dim(ratio_data_frame)[1]),
rep("volume_total_volume_ratio", dim(ratio_data_frame)[1]))
)
ggplot(data = rr, aes(x = rr$index,
y = rr$ratio,
fill = rr$Legend)) +
xlab("Lung Partitions") +
ylab("Ratio") +
ggtitle(unlist(strsplit(filename, "[.]"))[1]) +
geom_bar(stat="identity", color="black", position = position_dodge()) +
scale_fill_manual(values=c('#999999','#E69F00')) +
theme_minimal()
data = read.csv(filename)
total_volume = sum(data$volume)
particle_count = data$volume * data$mean
total_particle_count = sum(particle_count)
particle_total_volume_ratio = particle_count/total_particle_count
volume_total_volume_ratio = data$volume/total_volume
ratio_mat = as.matrix(cbind(particle_total_volume_ratio, volume_total_volume_ratio))
ratio_mat = t(ratio_mat[nrow(ratio_mat):1,])
index = 1:dim(ratio_mat)[2]
ratio_mat = rbind(index, ratio_mat)
#colnames(ratio_mat)= c(data$label)
colnames(ratio_data_frame) = c(paste0("l",data$label))
ratio_data_frame = as.data.frame(t(ratio_data_frame))
rr = data.frame(index = rep(ratio_data_frame$index, 2),
ratio = c(ratio_data_frame$particle_total_volume_ratio,
ratio_data_frame$volume_total_volume_ratio),
Legend = c(rep("particle_total_volume_ratio", dim(ratio_data_frame)[1]),
rep("volume_total_volume_ratio", dim(ratio_data_frame)[1]))
)
ggplot(data = rr, aes(x = rr$index,
y = rr$ratio,
fill = Legend)) +
xlab("Lung Partitions") +
ylab("Ratio") +
ggtitle(unlist(strsplit(filename, "[.]"))[1]) +
geom_bar(stat="identity", color="black", position = position_dodge()) +
scale_fill_manual(values=c('#999999','#E69F00')) +
theme_minimal()
data = read.csv(filename)
total_volume = sum(data$volume)
particle_count = data$volume * data$mean
total_particle_count = sum(particle_count)
particle_total_volume_ratio = particle_count/total_particle_count
volume_total_volume_ratio = data$volume/total_volume
ratio_mat = as.matrix(cbind(particle_total_volume_ratio, volume_total_volume_ratio))
ratio_mat = t(ratio_mat[nrow(ratio_mat):1,])
index = 1:dim(ratio_mat)[2]
ratio_mat = rbind(index, ratio_mat)
#colnames(ratio_mat)= c(data$label)
colnames(ratio_data_frame) = c(paste0("l",data$label))
ratio_data_frame = as.data.frame(t(ratio_data_frame))
rr = data.frame(index = rep(ratio_data_frame$index, 2),
ratio = c(ratio_data_frame$particle_total_volume_ratio,
ratio_data_frame$volume_total_volume_ratio),
Legend = c(rep("particle_total_volume_ratio", dim(ratio_data_frame)[1]),
rep("volume_total_volume_ratio", dim(ratio_data_frame)[1]))
)
ggplot(data = rr, aes(x = rr$index,
y = rr$ratio,
fill = Legend)) +
xlab("Lung Partitions") +
ylab("Ratio") +
ggtitle(unlist(strsplit(filename, "[.]"))[1]) +
geom_bar(stat="identity", color="black", position = position_dodge()) +
scale_fill_manual(values=c('#999999','#E69F00')) +
theme_minimal()
